<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ramadhan Work Calculator</title>

<style>

body{
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#eef2f6;
  font-family:Arial, sans-serif;
}

.card{
  background:white;
  padding:50px;
  border-radius:18px;
  box-shadow:0 15px 40px rgba(0,0,0,0.12);
  text-align:center;
  width:460px;
}

h1{
  margin-top:0;
}

.info{
  background:#f5f8ff;
  border-radius:10px;
  padding:15px;
  font-size:14px;
  margin-bottom:25px;
  line-height:1.6;
}

.row{
  display:flex;
  justify-content:center;
  gap:8px;
}

/* dropdown kecil */
.small-select{
  width:90px;
  padding:10px;
  border-radius:8px;
  border:1px solid #ddd;
  font-size:16px;
}

button{
  width:100%;
  padding:14px;
  margin-top:18px;
  border-radius:10px;
  border:none;
  font-size:18px;
  background:#2c7be5;
  color:white;
  cursor:pointer;
  font-weight:bold;
}

.result{
  margin-top:25px;
  font-size:24px;
  font-weight:bold;
}

.label{
  margin-top:15px;
  font-size:16px;
}

</style>
</head>

<body>

<div class="card">

<h1>ðŸ•Œ Jam Pulang Ramadhan</h1>

<div class="info">
<b>Ketentuan Ramadhan:</b><br>
Jam masuk expected: <b>07:30</b><br>
Istirahat: <b>12:00 â€“ 12:30 (30 menit)</b><br>
Total kerja efektif: <b>7 jam 30 menit</b>
</div>

<div class="label">Jam Masuk</div>
<div class="row">
<select id="hour" class="small-select"></select>
<select id="minute" class="small-select"></select>
</div>

<div class="label">Ekstra Istirahat (opsional)</div>
<div class="row">
<select id="extraBreak" class="small-select"></select>
</div>

<button onclick="calculate()">Hitung Jam Pulang</button>

<div class="result" id="result"></div>

<button id="calendarBtn" style="display:none;">
Tambah ke Google Calendar
</button>

</div>

<script>

// ===== JAM 01-24 =====
const hourSelect = document.getElementById("hour");
for(let h=1; h<=24; h++){
  let hh = String(h).padStart(2,'0');
  let opt = document.createElement("option");
  opt.value = hh;
  opt.text = hh;
  hourSelect.appendChild(opt);
}
hourSelect.value = "07";


// ===== MENIT 00-59 =====
const minuteSelect = document.getElementById("minute");
for(let m=0; m<60; m++){
  let mm = String(m).padStart(2,'0');
  let opt = document.createElement("option");
  opt.value = mm;
  opt.text = mm;
  minuteSelect.appendChild(opt);
}
minuteSelect.value = "30";


// ===== EKSTRA ISTIRAHAT 0-60 MENIT =====
const extraBreakSelect = document.getElementById("extraBreak");

let opt0 = document.createElement("option");
opt0.value = 0;
opt0.text = "0 menit";
extraBreakSelect.appendChild(opt0);

for(let i=1; i<=60; i++){
  let opt = document.createElement("option");
  opt.value = i;
  opt.text = i + " menit";
  extraBreakSelect.appendChild(opt);
}


// ===== FORMAT GOOGLE DATE =====
function formatGoogleDate(date){
  return date.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z";
}


// ===== HITUNG =====
function calculate(){

  let h = Number(hourSelect.value);
  let m = Number(minuteSelect.value);
  let extraBreak = Number(extraBreakSelect.value);

  let start = new Date();
  start.setHours(h,m,0);

  // kerja efektif 7.5 jam
  let end = new Date(start.getTime() + (7.5*60*60*1000));

  // break tetap jam 12
  let breakStart = new Date(start);
  breakStart.setHours(12,0,0);

  if(start < breakStart && end > breakStart){
    end = new Date(end.getTime() + (30*60*1000));
  }

  // tambah ekstra istirahat
  if(extraBreak > 0){
    end = new Date(end.getTime() + (extraBreak*60*1000));
  }

  let endH = String(end.getHours()).padStart(2,'0');
  let endM = String(end.getMinutes()).padStart(2,'0');

  document.getElementById("result").innerHTML =
    `âœ… Boleh pulang jam ${endH}:${endM}`;

  // ===== GOOGLE CALENDAR =====
  let startISO = formatGoogleDate(start);
  let endISO = formatGoogleDate(end);

  let url =
  `https://calendar.google.com/calendar/render?action=TEMPLATE`+
  `&text=Jam Pulang TownlandJKT (puasa version)`+
  `&dates=${startISO}/${endISO}`+
  `&details=Kerja Ramadhan 7.5 jam + ekstra istirahat`+
  `&ctz=Asia/Jakarta`;

  const btn = document.getElementById("calendarBtn");
  btn.style.display="block";
  btn.onclick = ()=> window.open(url, "_blank");
}

</script>

</body>
</html>
